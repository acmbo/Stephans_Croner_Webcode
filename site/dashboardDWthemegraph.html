<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Roboto:wght@100&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    
    <style>

        .links line {
          stroke: #999;
          stroke-opacity: 0.6;
        }
        
        .nodes circle {
          stroke: #fff;
          stroke-width: 1.5px;
        }
        
        text {
          font-family: sans-serif;
          font-size: 10px;
        }

        #dataviz_spec_kwgraph_svg {

            position: relative; 
            margin: auto; 
            height: 600px;
            width: 95%; 
            border:1px solid rgb(230, 224, 224);
            border-radius:10px;
            
        }
        .node:hover text {
            display: inline;
          }

        

    </style>

    
    <title>Mainpage</title>
</head>

<body>

    <!--Top Navbar-->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark"  aria-label="Fourth navbar example">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Stephan's Corner</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarsExample04">
            <ul class="navbar-nav me-auto mb-2 mb-md-0">
                <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="about.html">About - CV</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="projects.html" id="dropdown04" data-bs-toggle="dropdown" aria-expanded="false">Projects</a>
                    <ul class="dropdown-menu" aria-labelledby="dropdown04">
                        <li><a class="dropdown-item" href="dashboardDW.html">DW-Mining</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="contact.html">Contact</a>
                </li>
            </ul>
            </div>
        </div>
    </nav>
    


    <!--Cotainter for Main Body-->
    <main>
      <div class="container-fluid">
          <div class="row">


              <!-- Dashboard Nav Side Bar-->
              <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar">
                <div class="position-sticky pt-2">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="dashboardDW.html">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home" aria-hidden="true"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                            Scrapper
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="dashboardDWpostings.html">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bar-chart-2" aria-hidden="true"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
                            DW Postings
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link" href="dashboardDWthemegraph.html">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
                            Theme Graph
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"/><circle cx="12" cy="10" r="3"/></svg>
                            Theme Maps
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11.5" cy="8.5" r="5.5"/><path d="M11.5 14v7"/></svg>
                            Available Locations
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        
          

              <!-- Main Body with Informations-->
              <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                  <div class="chartjs-size-monitor">
                      <div class="chartjs-size-monitor-expand">
                          <div class=""></div>
                      </div>
                      <div class="chartjs-size-monitor-shrink">
                          <div class=""></div>
                      </div>
                  </div>
                  
                  <!--Title Section-->
                  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">

                    <h1 class="h2">DW Theme Graphs</h1>
                    <div class="btn-toolbar mb-2 mb-md-0 dropdown">
                        <div class="dropdown">
                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButtonSM" data-bs-toggle="dropdown" aria-expanded="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                            Weekly
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButtonSM" style="">
                            <li><h6 class="dropdown-header">Timeframe</h6></li>
                            <li><a class="dropdown-item" href="dashboardDWthemegraphweek">Weekly</a></li>
                            <li><a class="dropdown-item" href="dashboardDWthemegraphmonth">Monthly</a></li>
                            </ul>
                        </div>
                    </div>
                  </div>
                  
                  <!-- Documentation and Information-->

                  <div class="accordion" id="accordionExample">
                      <div class="accordion-item">
                      <h4 class="accordion-header" id="headingOne">
                          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                          Explanation
                          </button>
                      </h4>
                      <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample" style="">
                          <div class="accordion-body">
                          <strong>This is the first item's accordion body.</strong> It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
                          </div>
                      </div>
                      </div>
                  </div>


                  <!-- Databox and Plot -->
                  <div class="row">
                        
                        <div style="margin: 1rem;"> 
                            <div id="dataviz_spec_kwgraph" class="" >
                                <svg id="dataviz_spec_kwgraph_svg"></svg>

                            </div>
                        </div>

                  </div>
              </main>
          </div>
      </div>
    </main>
  

    <!-- Footer Section -->
    <footer>
        <div id="footer" class="footer">

            <div id="copyright">
            </div>
            <div id="footer__social">
                <ul class="footer_list">
                    <li id="footer_github" class="footer_social_icon"><a href="https://github.com/acmbo"
                            class="fa fa-github"></a></li>
                    <li id="footer_linkedIn" class="footer_social_icon"><a
                            href="https://at.linkedin.com/in/stephan-wegewitz-414889196" class="fa fa-linkedin"></a>
                    </li>
                    <li id="footer_Xing" class="footer_social_icon"><a
                            href="https://www.xing.com/profile/Stephan_Wegewitz" class="fa fa-xing"></a></li>
                    <li id="footer_instagramm" class="footer_social_icon"><a href="https://www.instagram.com/acmboart/"
                            class="fa fa-instagram"></a></li>


                </ul>
                <div id="info">
                    <p>Author: Stephan Wegewitz</p>
                    <!--<p><a href="mailto:hege@example.com">hege@example.com</a></p>-->
                </div>
            </div>
        </div>
    </footer>



    <!--Bootstrap dependencies-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script>

    <!--D3-->
    <script src="https://d3js.org/d3.v4.min.js"></script>


    <!--Internal
    -->
    <script>

        var forcestrength = -12;
        var radius = d3.scaleSqrt()
            .range([0, 6]);

        var svg = d3.select("#dataviz_spec_kwgraph_svg"),
            //width = +svg.attr("width"),
            //height = +svg.attr("height");
            width = window.innerWidth < 960 ? window.innerWidth - 200 : 920
            height = 600
        
        var scale_width = width < 720 ? width/0.6 : width/0.8

        var color = d3.scaleOrdinal(d3.schemeCategory20);
        console.log(width);
        console.log(scale_width);
        //https://stackoverflow.com/questions/46977022/how-to-adjust-size-of-force-directed-graph-in-d3-js
        var simulation = d3.forceSimulation()
        .force("link", d3.forceLink().id(function(d) { return d.id; }))
        .force("charge", d3.forceManyBody())
        //.force("charge", d3.forceManyBody().strength(forcestrength))  // Use this if you use to want forcestrenght
        .force("center", d3.forceCenter(scale_width, height/0.8));
        //.force("collide", d3.forceCollide(5).iterations(10));  // FOr overlap

        //add encompassing group for the zoom 
        var g = svg.append("g")
            .attr("class", "everything")
            .attr("transform", "scale(0.4)");

        d3.json("https://gist.githubusercontent.com/acmbo/b49be7beef592e8b6088225375db54c2/raw/255d88a91965b1415d950132aeb093f597260f01/graph", function(error, graph) {
            if (error) throw error;

            var link = g.append("g")
                .attr("class", "links")
                .selectAll("line")
                .data(graph.links)
                .enter().append("line")
                .attr("class", "link")
                .attr("stroke-width", function(d) { return Math.sqrt(d.value); });
            
            var node = g.append("g")
                .attr("class", "nodes")
                .selectAll("g")
                .data(graph.nodes)
                .enter().append("g")
            

            node.append('circle')
             .attr("r", function(d) { return radius(d.value / 2); })
             .attr("fill", function(d) { return color(d.group); })
        
            //add zoom capabilities 
            var zoom_handler = d3.zoom()
                .on("zoom", zoom_actions);

            zoom_handler(svg);

            var lables = node.append("text")
                .text(function(d) {
                return d.id;
                })
                .style("font-size", "8px")
                .attr('x', 6)
                .attr('y', 3);

            node.append("title")
                .text(function(d) { return d.id; });

            simulation
                .nodes(graph.nodes)
                .on("tick", ticked);

            simulation.force("link")
                .links(graph.links);

            function ticked() {
            link
                .attr("x1", function(d) { return d.source.x; })
                .attr("y1", function(d) { return d.source.y; })
                .attr("x2", function(d) { return d.target.x; })
                .attr("y2", function(d) { return d.target.y; });

            node
                .attr("transform", function(d) {
                return "translate(" + d.x + "," + d.y + ")";
                })
            }
        });

        //Zoom functions 
        function zoom_actions(){
                g.attr("transform", d3.event.transform)
            }


    </script>
  </body>

</html>